{"level":"info","msg":"Wrapper started","time":"2021-09-18T13:29:33.234Z","wrapper":514}
{"level":"info","msg":"finding gitaly","pid_file":"/var/opt/gitlab/gitaly/gitaly.pid","time":"2021-09-18T13:29:33.234Z","wrapper":514}
{"error":"open /var/opt/gitlab/gitaly/gitaly.pid: no such file or directory","level":"error","msg":"find gitaly","time":"2021-09-18T13:29:33.234Z","wrapper":514}
{"level":"info","msg":"spawning a process","time":"2021-09-18T13:29:33.234Z","wrapper":514}
{"gitaly":520,"level":"info","msg":"monitoring gitaly","time":"2021-09-18T13:29:33.235Z","wrapper":514}
time="2021-09-18T13:29:33Z" level=info msg="Starting GitalyversionGitaly, version 14.2.3"
time="2021-09-18T13:29:33Z" level=warning msg="git path not configured. Using default path resolution" resolvedPath=/opt/gitlab/embedded/bin/git
{"latencies":[0.001,0.005,0.025,0.1,0.5,1,10,30,60,300,1500],"level":"info","msg":"grpc prometheus histograms enabled","time":"2021-09-18T13:29:33.359Z"}
{"level":"info","msg":"finished tempdir cleaner walk","storage":"default","time":"2021-09-18T13:29:33.359Z","time_ms":0}
{"level":"info","msg":"clearing disk cache object folder","storage":"default","time":"2021-09-18T13:29:33.359Z"}
{"level":"info","msg":"moving disk cache object folder to /var/opt/gitlab/git-data/repositories/+gitaly/tmp/diskcache318146041","storage":"default","time":"2021-09-18T13:29:33.359Z"}
{"level":"info","msg":"disk cache object folder doesn't exist, no need to remove","storage":"default","time":"2021-09-18T13:29:33.359Z"}
{"level":"info","msg":"Starting file walker for /var/opt/gitlab/git-data/repositories/+gitaly/cache","path":"/var/opt/gitlab/git-data/repositories/+gitaly/cache","time":"2021-09-18T13:29:33.359Z"}
{"level":"info","msg":"Starting file walker for /var/opt/gitlab/git-data/repositories/+gitaly/state","path":"/var/opt/gitlab/git-data/repositories/+gitaly/state","time":"2021-09-18T13:29:33.359Z"}
{"level":"info","msg":"cleared all cache object files in /var/opt/gitlab/git-data/repositories/+gitaly/tmp/diskcache318146041 after 55.122µs","storage":"default","time":"2021-09-18T13:29:33.360Z"}
{"level":"info","msg":"starting RSS monitor","supervisor.name":"gitaly-ruby.0","supervisor.rss_threshold":209715200,"time":"2021-09-18T13:29:33.786Z"}
{"level":"info","msg":"starting RSS monitor","supervisor.name":"gitaly-ruby.1","supervisor.rss_threshold":209715200,"time":"2021-09-18T13:29:33.786Z"}
{"level":"warning","msg":"[core] grpc: addrConn.createTransport failed to connect to {/var/opt/gitlab/gitaly/internal_sockets/ruby.0 /var/opt/gitlab/gitaly/internal_sockets/ruby.0 \u003cnil\u003e 0 \u003cnil\u003e}. Err: connection error: desc = \"transport: Error while dialing dial unix /var/opt/gitlab/gitaly/internal_sockets/ruby.0: connect: no such file or directory\". Reconnecting...","pid":520,"system":"system","time":"2021-09-18T13:29:33.786Z"}
{"level":"warning","msg":"[core] grpc: addrConn.createTransport failed to connect to {/var/opt/gitlab/gitaly/internal_sockets/ruby.1 /var/opt/gitlab/gitaly/internal_sockets/ruby.1 \u003cnil\u003e 0 \u003cnil\u003e}. Err: connection error: desc = \"transport: Error while dialing dial unix /var/opt/gitlab/gitaly/internal_sockets/ruby.1: connect: no such file or directory\". Reconnecting...","pid":520,"system":"system","time":"2021-09-18T13:29:33.786Z"}
{"level":"warning","msg":"spawned","supervisor.args":["bundle","exec","bin/ruby-cd","/var/opt/gitlab/gitaly","/opt/gitlab/embedded/service/gitaly-ruby/bin/gitaly-ruby","520","/var/opt/gitlab/gitaly/internal_sockets/ruby.0"],"supervisor.name":"gitaly-ruby.0","supervisor.pid":536,"time":"2021-09-18T13:29:33.786Z"}
{"level":"warning","msg":"spawned","supervisor.args":["bundle","exec","bin/ruby-cd","/var/opt/gitlab/gitaly","/opt/gitlab/embedded/service/gitaly-ruby/bin/gitaly-ruby","520","/var/opt/gitlab/gitaly/internal_sockets/ruby.1"],"supervisor.name":"gitaly-ruby.1","supervisor.pid":537,"time":"2021-09-18T13:29:33.786Z"}
{"address":"/var/opt/gitlab/gitaly/gitaly.socket","level":"info","msg":"listening at unix address","time":"2021-09-18T13:29:33.801Z"}
{"address":"/var/opt/gitlab/gitaly/internal_sockets/internal_520.sock","level":"info","msg":"listening at unix address","time":"2021-09-18T13:29:33.801Z"}
{"address":"localhost:9236","level":"info","msg":"starting prometheus listener","time":"2021-09-18T13:29:33.803Z"}
{"level":"info","msg":"maintenance: daily scheduled","pid":520,"scheduled":"2021-09-19T12:00:00Z","time":"2021-09-18T13:29:33.803Z"}
{"level":"info","msg":"PID 536 BUNDLE_GEMFILE=/opt/gitlab/embedded/service/gitaly-ruby/Gemfile","supervisor.args":["bundle","exec","bin/ruby-cd","/var/opt/gitlab/gitaly","/opt/gitlab/embedded/service/gitaly-ruby/bin/gitaly-ruby","520","/var/opt/gitlab/gitaly/internal_sockets/ruby.0"],"supervisor.name":"gitaly-ruby.0","time":"2021-09-18T13:29:34.073Z"}
{"level":"info","msg":"PID 537 BUNDLE_GEMFILE=/opt/gitlab/embedded/service/gitaly-ruby/Gemfile","supervisor.args":["bundle","exec","bin/ruby-cd","/var/opt/gitlab/gitaly","/opt/gitlab/embedded/service/gitaly-ruby/bin/gitaly-ruby","520","/var/opt/gitlab/gitaly/internal_sockets/ruby.1"],"supervisor.name":"gitaly-ruby.1","time":"2021-09-18T13:29:34.073Z"}
{"correlation_id":"01FFWHKB4EX591HD629BESA0S2","grpc.code":"OK","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.meta.method_type":"unary","grpc.method":"RepositoryExists","grpc.request.deadline":"2021-09-18T13:30:24.001Z","grpc.request.fullMethod":"/gitaly.RepositoryService/RepositoryExists","grpc.request.glProjectPath":"","grpc.request.glRepository":"","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.git","grpc.request.repoStorage":"default","grpc.service":"gitaly.RepositoryService","grpc.start_time":"2021-09-18T13:30:14.542Z","grpc.time_ms":0.068,"level":"info","msg":"finished unary call with code OK","peer.address":"@","pid":520,"span.kind":"server","system":"grpc","time":"2021-09-18T13:30:14.542Z"}
{"correlation_id":"01FFWHKB5YK3Q1CK8G14R9DE70","diskcache":"8d3fa90e-0bd1-4430-85dc-e510ef1b8542","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.meta.method_type":"unary","grpc.method":"CreateRepository","grpc.request.deadline":"2021-09-18T13:30:24.009Z","grpc.request.fullMethod":"/gitaly.RepositoryService/CreateRepository","grpc.request.glProjectPath":"gitlab-instance-9b87f7bd/Monitoring","grpc.request.glRepository":"project-1","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.git","grpc.request.repoStorage":"default","grpc.service":"gitaly.RepositoryService","grpc.start_time":"2021-09-18T13:30:14.590Z","level":"info","msg":"diskcache state change","peer.address":"@","pid":520,"span.kind":"server","system":"grpc","time":"2021-09-18T13:30:14.599Z"}
{"command.count":1,"command.inblock":616,"command.majflt":2,"command.maxrss":43620,"command.minflt":156,"command.oublock":168,"command.real_time_ms":6,"command.system_time_ms":0,"command.user_time_ms":3,"correlation_id":"01FFWHKB5YK3Q1CK8G14R9DE70","grpc.code":"OK","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.meta.method_type":"unary","grpc.method":"CreateRepository","grpc.request.deadline":"2021-09-18T13:30:24.009Z","grpc.request.fullMethod":"/gitaly.RepositoryService/CreateRepository","grpc.request.glProjectPath":"gitlab-instance-9b87f7bd/Monitoring","grpc.request.glRepository":"project-1","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.git","grpc.request.repoStorage":"default","grpc.service":"gitaly.RepositoryService","grpc.start_time":"2021-09-18T13:30:14.590Z","grpc.time_ms":8.933,"level":"info","msg":"finished unary call with code OK","peer.address":"@","pid":520,"span.kind":"server","system":"grpc","time":"2021-09-18T13:30:14.599Z"}
{"correlation_id":"01FFWHKB6D798NATKM6S5PM4E7","grpc.code":"OK","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.meta.method_type":"unary","grpc.method":"RepositoryExists","grpc.request.deadline":"2021-09-18T13:30:24.005Z","grpc.request.fullMethod":"/gitaly.RepositoryService/RepositoryExists","grpc.request.glProjectPath":"gitlab-instance-9b87f7bd/Monitoring","grpc.request.glRepository":"project-1","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.git","grpc.request.repoStorage":"default","grpc.service":"gitaly.RepositoryService","grpc.start_time":"2021-09-18T13:30:14.605Z","grpc.time_ms":0.058,"level":"info","msg":"finished unary call with code OK","peer.address":"@","pid":520,"span.kind":"server","system":"grpc","time":"2021-09-18T13:30:14.605Z"}
{"command.count":1,"command.inblock":144,"command.majflt":1,"command.maxrss":43620,"command.minflt":149,"command.oublock":0,"command.real_time_ms":2,"command.system_time_ms":0,"command.user_time_ms":1,"correlation_id":"01FFWHKB6F1ZPWERK01K44H6ZC","grpc.code":"OK","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.meta.method_type":"unary","grpc.method":"HasLocalBranches","grpc.request.deadline":"2021-09-18T13:30:24.007Z","grpc.request.fullMethod":"/gitaly.RepositoryService/HasLocalBranches","grpc.request.glProjectPath":"gitlab-instance-9b87f7bd/Monitoring","grpc.request.glRepository":"project-1","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.git","grpc.request.repoStorage":"default","grpc.service":"gitaly.RepositoryService","grpc.start_time":"2021-09-18T13:30:14.607Z","grpc.time_ms":2.381,"level":"info","msg":"finished unary call with code OK","peer.address":"@","pid":520,"span.kind":"server","system":"grpc","time":"2021-09-18T13:30:14.609Z"}
{"correlation_id":"db114ad17ac70da8689ccd04f479d3e6","grpc.code":"OK","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.meta.method_type":"unary","grpc.method":"RepositoryExists","grpc.request.deadline":"2021-09-18T13:30:24.003Z","grpc.request.fullMethod":"/gitaly.RepositoryService/RepositoryExists","grpc.request.glProjectPath":"gitlab-instance-9b87f7bd/Monitoring","grpc.request.glRepository":"project-1","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.git","grpc.request.repoStorage":"default","grpc.service":"gitaly.RepositoryService","grpc.start_time":"2021-09-18T13:30:14.613Z","grpc.time_ms":0.053,"level":"info","msg":"finished unary call with code OK","peer.address":"@","pid":520,"span.kind":"server","system":"grpc","time":"2021-09-18T13:30:14.613Z"}
{"correlation_id":"db114ad17ac70da8689ccd04f479d3e6","diskcache":"c162ffbb-0e1c-4acd-b7cc-5fda4b06964e","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.meta.method_type":"unary","grpc.method":"SetConfig","grpc.request.deadline":"2021-09-18T13:30:24.006Z","grpc.request.fullMethod":"/gitaly.RepositoryService/SetConfig","grpc.request.glProjectPath":"gitlab-instance-9b87f7bd/Monitoring","grpc.request.glRepository":"project-1","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.git","grpc.request.repoStorage":"default","grpc.service":"gitaly.RepositoryService","grpc.start_time":"2021-09-18T13:30:14.617Z","level":"info","msg":"diskcache state change","peer.address":"@","pid":520,"span.kind":"server","system":"grpc","time":"2021-09-18T13:30:14.620Z"}
{"correlation_id":"db114ad17ac70da8689ccd04f479d3e6","grpc.code":"OK","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.meta.method_type":"unary","grpc.method":"SetConfig","grpc.request.deadline":"2021-09-18T13:30:24.006Z","grpc.request.fullMethod":"/gitaly.RepositoryService/SetConfig","grpc.request.glProjectPath":"gitlab-instance-9b87f7bd/Monitoring","grpc.request.glRepository":"project-1","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.git","grpc.request.repoStorage":"default","grpc.service":"gitaly.RepositoryService","grpc.start_time":"2021-09-18T13:30:14.617Z","grpc.time_ms":3.395,"level":"info","msg":"finished unary call with code OK","peer.address":"@","pid":520,"span.kind":"server","system":"grpc","time":"2021-09-18T13:30:14.620Z"}
{"correlation_id":"db114ad17ac70da8689ccd04f479d3e6","grpc.code":"OK","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.meta.method_type":"unary","grpc.method":"RepositoryExists","grpc.request.deadline":"2021-09-18T13:30:24.006Z","grpc.request.fullMethod":"/gitaly.RepositoryService/RepositoryExists","grpc.request.glProjectPath":"gitlab-instance-9b87f7bd/Monitoring.wiki","grpc.request.glRepository":"wiki-1","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.wiki.git","grpc.request.repoStorage":"default","grpc.service":"gitaly.RepositoryService","grpc.start_time":"2021-09-18T13:30:14.626Z","grpc.time_ms":0.053,"level":"info","msg":"finished unary call with code OK","peer.address":"@","pid":520,"span.kind":"server","system":"grpc","time":"2021-09-18T13:30:14.627Z"}
{"correlation_id":"db114ad17ac70da8689ccd04f479d3e6","diskcache":"f69df4cf-fd2b-4d21-be47-39b89c254dc5","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.meta.method_type":"unary","grpc.method":"CreateRepository","grpc.request.deadline":"2021-09-18T13:30:24.009Z","grpc.request.fullMethod":"/gitaly.RepositoryService/CreateRepository","grpc.request.glProjectPath":"gitlab-instance-9b87f7bd/Monitoring.wiki","grpc.request.glRepository":"wiki-1","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.wiki.git","grpc.request.repoStorage":"default","grpc.service":"gitaly.RepositoryService","grpc.start_time":"2021-09-18T13:30:14.629Z","level":"info","msg":"diskcache state change","peer.address":"@","pid":520,"span.kind":"server","system":"grpc","time":"2021-09-18T13:30:14.632Z"}
{"command.count":1,"command.inblock":0,"command.majflt":0,"command.maxrss":43620,"command.minflt":157,"command.oublock":168,"command.real_time_ms":2,"command.system_time_ms":2,"command.user_time_ms":0,"correlation_id":"db114ad17ac70da8689ccd04f479d3e6","grpc.code":"OK","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.meta.method_type":"unary","grpc.method":"CreateRepository","grpc.request.deadline":"2021-09-18T13:30:24.009Z","grpc.request.fullMethod":"/gitaly.RepositoryService/CreateRepository","grpc.request.glProjectPath":"gitlab-instance-9b87f7bd/Monitoring.wiki","grpc.request.glRepository":"wiki-1","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.wiki.git","grpc.request.repoStorage":"default","grpc.service":"gitaly.RepositoryService","grpc.start_time":"2021-09-18T13:30:14.629Z","grpc.time_ms":3.805,"level":"info","msg":"finished unary call with code OK","peer.address":"@","pid":520,"span.kind":"server","system":"grpc","time":"2021-09-18T13:30:14.632Z"}
{"correlation_id":"db114ad17ac70da8689ccd04f479d3e6","grpc.code":"OK","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.meta.method_type":"unary","grpc.method":"RepositoryExists","grpc.request.deadline":"2021-09-18T13:30:24.005Z","grpc.request.fullMethod":"/gitaly.RepositoryService/RepositoryExists","grpc.request.glProjectPath":"gitlab-instance-9b87f7bd/Monitoring.wiki","grpc.request.glRepository":"wiki-1","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.wiki.git","grpc.request.repoStorage":"default","grpc.service":"gitaly.RepositoryService","grpc.start_time":"2021-09-18T13:30:14.636Z","grpc.time_ms":0.05,"level":"info","msg":"finished unary call with code OK","peer.address":"@","pid":520,"span.kind":"server","system":"grpc","time":"2021-09-18T13:30:14.636Z"}
{"command.count":1,"command.inblock":0,"command.majflt":0,"command.maxrss":43620,"command.minflt":148,"command.oublock":0,"command.real_time_ms":1,"command.system_time_ms":1,"command.user_time_ms":0,"correlation_id":"db114ad17ac70da8689ccd04f479d3e6","grpc.code":"OK","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.meta.method_type":"unary","grpc.method":"HasLocalBranches","grpc.request.deadline":"2021-09-18T13:30:24.008Z","grpc.request.fullMethod":"/gitaly.RepositoryService/HasLocalBranches","grpc.request.glProjectPath":"gitlab-instance-9b87f7bd/Monitoring.wiki","grpc.request.glRepository":"wiki-1","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.wiki.git","grpc.request.repoStorage":"default","grpc.service":"gitaly.RepositoryService","grpc.start_time":"2021-09-18T13:30:14.638Z","grpc.time_ms":1.435,"level":"info","msg":"finished unary call with code OK","peer.address":"@","pid":520,"span.kind":"server","system":"grpc","time":"2021-09-18T13:30:14.639Z"}
{"args":["/opt/gitlab/embedded/bin/git","--git-dir","/var/opt/gitlab/git-data/repositories/@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.wiki.git","-c","core.fsyncObjectFiles=true","-c","gc.auto=0","-c","core.autocrlf=input","rev-list","--count","HEAD"],"command.exitCode":128,"command.inblock":512,"command.maxrss":43620,"command.oublock":0,"command.real_time_ms":2.236967,"command.system_time_ms":1.345,"command.user_time_ms":0,"correlation_id":"db114ad17ac70da8689ccd04f479d3e6","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.meta.method_type":"unary","grpc.method":"CountCommits","grpc.request.deadline":"2021-09-18T13:30:44.045Z","grpc.request.fullMethod":"/gitaly.CommitService/CountCommits","grpc.request.glProjectPath":"gitlab-instance-9b87f7bd/Monitoring.wiki","grpc.request.glRepository":"wiki-1","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.wiki.git","grpc.request.repoStorage":"default","grpc.service":"gitaly.CommitService","grpc.start_time":"2021-09-18T13:30:14.645Z","level":"error","msg":"fatal: ambiguous argument 'HEAD': unknown revision or path not in the working tree.\nUse '--' to separate paths from revisions, like this:\n'git \u003ccommand\u003e [\u003crevision\u003e...] -- [\u003cfile\u003e...]'\n","path":"/opt/gitlab/embedded/bin/git","peer.address":"@","pid":808,"span.kind":"server","system":"grpc","time":"2021-09-18T13:30:14.647Z"}
{"correlation_id":"db114ad17ac70da8689ccd04f479d3e6","error":"exit status 128","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.meta.method_type":"unary","grpc.method":"CountCommits","grpc.request.deadline":"2021-09-18T13:30:44.045Z","grpc.request.fullMethod":"/gitaly.CommitService/CountCommits","grpc.request.glProjectPath":"gitlab-instance-9b87f7bd/Monitoring.wiki","grpc.request.glRepository":"wiki-1","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.wiki.git","grpc.request.repoStorage":"default","grpc.service":"gitaly.CommitService","grpc.start_time":"2021-09-18T13:30:14.645Z","level":"info","msg":"ignoring git rev-list error","peer.address":"@","pid":520,"span.kind":"server","system":"grpc","time":"2021-09-18T13:30:14.647Z"}
{"command.count":1,"command.inblock":512,"command.majflt":2,"command.maxrss":43620,"command.minflt":154,"command.oublock":0,"command.real_time_ms":2,"command.system_time_ms":1,"command.user_time_ms":0,"correlation_id":"db114ad17ac70da8689ccd04f479d3e6","grpc.code":"OK","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.meta.method_type":"unary","grpc.method":"CountCommits","grpc.request.deadline":"2021-09-18T13:30:44.045Z","grpc.request.fullMethod":"/gitaly.CommitService/CountCommits","grpc.request.glProjectPath":"gitlab-instance-9b87f7bd/Monitoring.wiki","grpc.request.glRepository":"wiki-1","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.wiki.git","grpc.request.repoStorage":"default","grpc.service":"gitaly.CommitService","grpc.start_time":"2021-09-18T13:30:14.645Z","grpc.time_ms":2.462,"level":"info","msg":"finished unary call with code OK","peer.address":"@","pid":520,"span.kind":"server","system":"grpc","time":"2021-09-18T13:30:14.647Z"}
{"command.count":1,"command.inblock":0,"command.majflt":0,"command.maxrss":43620,"command.minflt":146,"command.oublock":0,"command.real_time_ms":1,"command.system_time_ms":0,"command.user_time_ms":1,"correlation_id":"db114ad17ac70da8689ccd04f479d3e6","grpc.code":"OK","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.meta.method_type":"unary","grpc.method":"FindDefaultBranchName","grpc.request.deadline":"2021-09-18T13:30:24.002Z","grpc.request.fullMethod":"/gitaly.RefService/FindDefaultBranchName","grpc.request.glProjectPath":"gitlab-instance-9b87f7bd/Monitoring.wiki","grpc.request.glRepository":"wiki-1","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.wiki.git","grpc.request.repoStorage":"default","grpc.service":"gitaly.RefService","grpc.start_time":"2021-09-18T13:30:14.652Z","grpc.time_ms":1.653,"level":"info","msg":"finished unary call with code OK","peer.address":"@","pid":520,"span.kind":"server","system":"grpc","time":"2021-09-18T13:30:14.654Z"}
{"command.count":1,"command.inblock":0,"command.majflt":0,"command.maxrss":43620,"command.minflt":149,"command.oublock":0,"command.real_time_ms":1,"command.system_time_ms":0,"command.user_time_ms":1,"correlation_id":"db114ad17ac70da8689ccd04f479d3e6","grpc.code":"OK","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.meta.method_type":"unary","grpc.method":"HasLocalBranches","grpc.request.deadline":"2021-09-18T13:30:24.006Z","grpc.request.fullMethod":"/gitaly.RepositoryService/HasLocalBranches","grpc.request.glProjectPath":"gitlab-instance-9b87f7bd/Monitoring.wiki","grpc.request.glRepository":"wiki-1","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.wiki.git","grpc.request.repoStorage":"default","grpc.service":"gitaly.RepositoryService","grpc.start_time":"2021-09-18T13:30:14.656Z","grpc.time_ms":1.385,"level":"info","msg":"finished unary call with code OK","peer.address":"@","pid":520,"span.kind":"server","system":"grpc","time":"2021-09-18T13:30:14.658Z"}
{"correlation_id":"db114ad17ac70da8689ccd04f479d3e6","diskcache":"80b234f7-6997-473c-b717-3ac48eb42053","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.meta.method_type":"unary","grpc.method":"WriteRef","grpc.request.deadline":"2021-09-18T13:30:24.003Z","grpc.request.fullMethod":"/gitaly.RepositoryService/WriteRef","grpc.request.glProjectPath":"gitlab-instance-9b87f7bd/Monitoring.wiki","grpc.request.glRepository":"wiki-1","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.wiki.git","grpc.request.repoStorage":"default","grpc.service":"gitaly.RepositoryService","grpc.start_time":"2021-09-18T13:30:14.663Z","level":"info","msg":"diskcache state change","peer.address":"@","pid":520,"span.kind":"server","system":"grpc","time":"2021-09-18T13:30:14.666Z"}
{"command.count":1,"command.inblock":0,"command.majflt":0,"command.maxrss":43620,"command.minflt":152,"command.oublock":8,"command.real_time_ms":1,"command.system_time_ms":0,"command.user_time_ms":1,"correlation_id":"db114ad17ac70da8689ccd04f479d3e6","grpc.code":"OK","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.meta.method_type":"unary","grpc.method":"WriteRef","grpc.request.deadline":"2021-09-18T13:30:24.003Z","grpc.request.fullMethod":"/gitaly.RepositoryService/WriteRef","grpc.request.glProjectPath":"gitlab-instance-9b87f7bd/Monitoring.wiki","grpc.request.glRepository":"wiki-1","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.wiki.git","grpc.request.repoStorage":"default","grpc.service":"gitaly.RepositoryService","grpc.start_time":"2021-09-18T13:30:14.663Z","grpc.time_ms":2.888,"level":"info","msg":"finished unary call with code OK","peer.address":"@","pid":520,"span.kind":"server","system":"grpc","time":"2021-09-18T13:30:14.666Z"}
{"command.count":1,"command.inblock":0,"command.majflt":0,"command.maxrss":43620,"command.minflt":147,"command.oublock":0,"command.real_time_ms":1,"command.system_time_ms":1,"command.user_time_ms":0,"correlation_id":"db114ad17ac70da8689ccd04f479d3e6","grpc.code":"OK","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.meta.method_type":"unary","grpc.method":"FindDefaultBranchName","grpc.request.deadline":"2021-09-18T13:30:24.007Z","grpc.request.fullMethod":"/gitaly.RefService/FindDefaultBranchName","grpc.request.glProjectPath":"gitlab-instance-9b87f7bd/Monitoring","grpc.request.glRepository":"project-1","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.git","grpc.request.repoStorage":"default","grpc.service":"gitaly.RefService","grpc.start_time":"2021-09-18T13:30:14.757Z","grpc.time_ms":1.974,"level":"info","msg":"finished unary call with code OK","peer.address":"@","pid":520,"span.kind":"server","system":"grpc","time":"2021-09-18T13:30:14.759Z"}
{"command.count":1,"command.inblock":0,"command.majflt":0,"command.maxrss":43620,"command.minflt":149,"command.oublock":0,"command.real_time_ms":1,"command.system_time_ms":0,"command.user_time_ms":1,"correlation_id":"db114ad17ac70da8689ccd04f479d3e6","grpc.code":"OK","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.meta.method_type":"unary","grpc.method":"HasLocalBranches","grpc.request.deadline":"2021-09-18T13:30:24.002Z","grpc.request.fullMethod":"/gitaly.RepositoryService/HasLocalBranches","grpc.request.glProjectPath":"gitlab-instance-9b87f7bd/Monitoring","grpc.request.glRepository":"project-1","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.git","grpc.request.repoStorage":"default","grpc.service":"gitaly.RepositoryService","grpc.start_time":"2021-09-18T13:30:14.762Z","grpc.time_ms":1.377,"level":"info","msg":"finished unary call with code OK","peer.address":"@","pid":520,"span.kind":"server","system":"grpc","time":"2021-09-18T13:30:14.763Z"}
{"command.count":1,"command.inblock":0,"command.majflt":0,"command.maxrss":44136,"command.minflt":147,"command.oublock":0,"command.real_time_ms":1,"command.system_time_ms":0,"command.user_time_ms":1,"correlation_id":"db114ad17ac70da8689ccd04f479d3e6","grpc.code":"OK","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.meta.method_type":"server_stream","grpc.method":"FindAllBranchNames","grpc.request.deadline":"2021-09-18T13:30:24.004Z","grpc.request.fullMethod":"/gitaly.RefService/FindAllBranchNames","grpc.request.glProjectPath":"gitlab-instance-9b87f7bd/Monitoring","grpc.request.glRepository":"project-1","grpc.request.repoPath":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.git","grpc.request.repoStorage":"default","grpc.service":"gitaly.RefService","grpc.start_time":"2021-09-18T13:30:14.844Z","grpc.time_ms":2.096,"level":"info","msg":"finished streaming call with code OK","peer.address":"@","pid":520,"span.kind":"server","system":"grpc","time":"2021-09-18T13:30:14.846Z"}
{"command.count":1,"command.inblock":0,"command.majflt":0,"command.maxrss":44136,"command.minflt":134,"command.oublock":0,"command.real_time_ms":1,"command.system_time_ms":0,"command.user_time_ms":0,"correlation_id":"db114ad17ac70da8689ccd04f479d3e6","grpc.code":"OK","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.meta.method_type":"unary","grpc.method":"ServerInfo","grpc.request.deadline":"2021-09-18T13:30:24.007Z","grpc.request.fullMethod":"/gitaly.ServerService/ServerInfo","grpc.service":"gitaly.ServerService","grpc.start_time":"2021-09-18T13:30:14.857Z","grpc.time_ms":1.268,"level":"info","msg":"finished unary call with code OK","peer.address":"@","pid":520,"span.kind":"server","system":"grpc","time":"2021-09-18T13:30:14.858Z"}
{"correlation_id":"db114ad17ac70da8689ccd04f479d3e6","duration_ms":0,"error":"Post \"http://unix/api/v4/internal/allowed\": dial unix /var/opt/gitlab/gitlab-workhorse/sockets/socket: connect: no such file or directory","level":"error","method":"POST","msg":"Internal API unreachable","time":"2021-09-18T13:30:14.948Z","url":"http://unix/api/v4/internal/allowed"}
{"correlation_id":"db114ad17ac70da8689ccd04f479d3e6","error":"GitLab: Internal API unreachable","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.meta.method_type":"client_stream","grpc.method":"UserCommitFiles","grpc.request.deadline":"2021-09-18T19:30:14.869Z","grpc.request.fullMethod":"/gitaly.OperationService/UserCommitFiles","grpc.service":"gitaly.OperationService","grpc.start_time":"2021-09-18T13:30:14.869Z","level":"warning","msg":"stopping transaction because pre-receive hook failed","peer.address":"@","pid":520,"span.kind":"server","system":"grpc","time":"2021-09-18T13:30:14.948Z"}
{"branch_name":"bWFpbg==","correlation_id":"db114ad17ac70da8689ccd04f479d3e6","error":"update reference: GitLab: Internal API unreachable","force":false,"grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.meta.method_type":"client_stream","grpc.method":"UserCommitFiles","grpc.request.deadline":"2021-09-18T19:30:14.869Z","grpc.request.fullMethod":"/gitaly.OperationService/UserCommitFiles","grpc.service":"gitaly.OperationService","grpc.start_time":"2021-09-18T13:30:14.869Z","level":"error","msg":"user commit files failed","peer.address":"@","pid":520,"repository_relative_path":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.git","repository_storage":"default","span.kind":"server","start_branch_name":null,"start_repository_relative_path":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.git","start_repository_storage":"default","start_sha":"","system":"grpc","time":"2021-09-18T13:30:14.948Z"}
{"branch_name":"bWFpbg==","correlation_id":"db114ad17ac70da8689ccd04f479d3e6","diskcache":"b0f769ea-77bd-48fe-a521-c222d782cb03","force":false,"grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.meta.method_type":"client_stream","grpc.method":"UserCommitFiles","grpc.request.deadline":"2021-09-18T19:30:14.869Z","grpc.request.fullMethod":"/gitaly.OperationService/UserCommitFiles","grpc.service":"gitaly.OperationService","grpc.start_time":"2021-09-18T13:30:14.869Z","level":"info","msg":"diskcache state change","peer.address":"@","pid":520,"repository_relative_path":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.git","repository_storage":"default","span.kind":"server","start_branch_name":null,"start_repository_relative_path":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.git","start_repository_storage":"default","start_sha":"","system":"grpc","time":"2021-09-18T13:30:14.950Z"}
{"branch_name":"bWFpbg==","command.count":4,"command.inblock":36096,"command.majflt":156,"command.maxrss":44136,"command.minflt":1353,"command.oublock":24,"command.real_time_ms":74,"command.system_time_ms":8,"command.user_time_ms":16,"correlation_id":"db114ad17ac70da8689ccd04f479d3e6","force":false,"grpc.code":"OK","grpc.meta.auth_version":"v2","grpc.meta.client_name":"gitlab-web","grpc.meta.deadline_type":"unknown","grpc.meta.method_type":"client_stream","grpc.method":"UserCommitFiles","grpc.request.deadline":"2021-09-18T19:30:14.869Z","grpc.request.fullMethod":"/gitaly.OperationService/UserCommitFiles","grpc.service":"gitaly.OperationService","grpc.start_time":"2021-09-18T13:30:14.869Z","grpc.time_ms":80.825,"level":"info","msg":"finished streaming call with code OK","peer.address":"@","pid":520,"repository_relative_path":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.git","repository_storage":"default","span.kind":"server","start_branch_name":null,"start_repository_relative_path":"@hashed/6b/86/6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b.git","start_repository_storage":"default","start_sha":"","system":"grpc","time":"2021-09-18T13:30:14.950Z"}
{"gitaly":520,"level":"warning","msg":"forwarding signal","signal":1,"time":"2021-09-18T13:32:46.442Z","wrapper":514}
time="2021-09-18T13:32:46Z" level=info msg="Starting GitalyversionGitaly, version 14.2.3"
time="2021-09-18T13:32:46Z" level=warning msg="git path not configured. Using default path resolution" resolvedPath=/opt/gitlab/embedded/bin/git
{"latencies":[0.001,0.005,0.025,0.1,0.5,1,10,30,60,300,1500],"level":"info","msg":"grpc prometheus histograms enabled","time":"2021-09-18T13:32:46.562Z"}
{"level":"info","msg":"clearing disk cache object folder","storage":"default","time":"2021-09-18T13:32:46.563Z"}
{"level":"info","msg":"finished tempdir cleaner walk","storage":"default","time":"2021-09-18T13:32:46.563Z","time_ms":0}
{"level":"info","msg":"moving disk cache object folder to /var/opt/gitlab/git-data/repositories/+gitaly/tmp/diskcache401455720","storage":"default","time":"2021-09-18T13:32:46.563Z"}
{"level":"info","msg":"disk cache object folder doesn't exist, no need to remove","storage":"default","time":"2021-09-18T13:32:46.563Z"}
{"level":"info","msg":"Starting file walker for /var/opt/gitlab/git-data/repositories/+gitaly/cache","path":"/var/opt/gitlab/git-data/repositories/+gitaly/cache","time":"2021-09-18T13:32:46.563Z"}
{"level":"info","msg":"Starting file walker for /var/opt/gitlab/git-data/repositories/+gitaly/state","path":"/var/opt/gitlab/git-data/repositories/+gitaly/state","time":"2021-09-18T13:32:46.563Z"}
{"level":"info","msg":"cleared all cache object files in /var/opt/gitlab/git-data/repositories/+gitaly/tmp/diskcache401455720 after 64.482µs","storage":"default","time":"2021-09-18T13:32:46.563Z"}
{"level":"info","msg":"starting RSS monitor","supervisor.name":"gitaly-ruby.0","supervisor.rss_threshold":209715200,"time":"2021-09-18T13:32:46.969Z"}
{"level":"info","msg":"starting RSS monitor","supervisor.name":"gitaly-ruby.1","supervisor.rss_threshold":209715200,"time":"2021-09-18T13:32:46.969Z"}
{"level":"warning","msg":"spawned","supervisor.args":["bundle","exec","bin/ruby-cd","/var/opt/gitlab/gitaly","/opt/gitlab/embedded/service/gitaly-ruby/bin/gitaly-ruby","1448","/var/opt/gitlab/gitaly/internal_sockets/ruby.0"],"supervisor.name":"gitaly-ruby.0","supervisor.pid":1472,"time":"2021-09-18T13:32:46.970Z"}
{"level":"warning","msg":"spawned","supervisor.args":["bundle","exec","bin/ruby-cd","/var/opt/gitlab/gitaly","/opt/gitlab/embedded/service/gitaly-ruby/bin/gitaly-ruby","1448","/var/opt/gitlab/gitaly/internal_sockets/ruby.1"],"supervisor.name":"gitaly-ruby.1","supervisor.pid":1473,"time":"2021-09-18T13:32:46.971Z"}
{"address":"/var/opt/gitlab/gitaly/gitaly.socket","level":"info","msg":"listening at unix address","time":"2021-09-18T13:32:46.981Z"}
{"address":"/var/opt/gitlab/gitaly/internal_sockets/internal_1448.sock","level":"info","msg":"listening at unix address","time":"2021-09-18T13:32:46.981Z"}
{"address":"localhost:9236","level":"info","msg":"starting prometheus listener","time":"2021-09-18T13:32:46.982Z"}
{"level":"info","msg":"maintenance: daily scheduled","pid":1448,"scheduled":"2021-09-19T12:00:00Z","time":"2021-09-18T13:32:46.983Z"}
{"graceful_timeout":60000000000,"level":"warning","msg":"starting grace period","time":"2021-09-18T13:32:46.983Z"}
{"level":"info","msg":"Upgrade succeeded","time":"2021-09-18T13:32:46.983Z"}
{"level":"warning","msg":"[core] grpc: addrConn.createTransport failed to connect to {unix:/var/opt/gitlab/gitaly/internal_sockets/internal_520.sock localhost \u003cnil\u003e 0 \u003cnil\u003e}. Err: connection error: desc = \"transport: Error while dialing dial unix /var/opt/gitlab/gitaly/internal_sockets/internal_520.sock: connect: no such file or directory\". Reconnecting...","pid":520,"system":"system","time":"2021-09-18T13:32:46.983Z"}
{"error":"signal: killed","level":"warning","msg":"exited","supervisor.args":["bundle","exec","bin/ruby-cd","/var/opt/gitlab/gitaly","/opt/gitlab/embedded/service/gitaly-ruby/bin/gitaly-ruby","520","/var/opt/gitlab/gitaly/internal_sockets/ruby.0"],"supervisor.name":"gitaly-ruby.0","time":"2021-09-18T13:32:46.992Z"}
{"error":"graceful upgrade: completed","level":"error","msg":"shutting down","time":"2021-09-18T13:32:46.999Z"}
{"level":"info","msg":"Gitaly stopped","time":"2021-09-18T13:32:46.999Z"}
{"gitaly":520,"level":"warning","msg":"forwarding signal","signal":17,"time":"2021-09-18T13:32:47.000Z","wrapper":514}
{"error":"os: process already finished","gitaly":520,"level":"error","msg":"can't forward the signal","signal":17,"time":"2021-09-18T13:32:47.000Z","wrapper":514}
{"gitaly":520,"level":"error","msg":"wrapper for gitaly shutting down","time":"2021-09-18T13:32:47.254Z","wrapper":514}
{"level":"info","msg":"Wrapper started","time":"2021-09-18T13:32:47.260Z","wrapper":1476}
{"level":"info","msg":"finding gitaly","pid_file":"/var/opt/gitlab/gitaly/gitaly.pid","time":"2021-09-18T13:32:47.260Z","wrapper":1476}
{"level":"info","msg":"adopting a process","time":"2021-09-18T13:32:47.267Z","wrapper":1476}
{"gitaly":1448,"level":"info","msg":"monitoring gitaly","time":"2021-09-18T13:32:47.267Z","wrapper":1476}
{"level":"info","msg":"PID 1473 BUNDLE_GEMFILE=/opt/gitlab/embedded/service/gitaly-ruby/Gemfile","supervisor.args":["bundle","exec","bin/ruby-cd","/var/opt/gitlab/gitaly","/opt/gitlab/embedded/service/gitaly-ruby/bin/gitaly-ruby","1448","/var/opt/gitlab/gitaly/internal_sockets/ruby.1"],"supervisor.name":"gitaly-ruby.1","time":"2021-09-18T13:32:47.289Z"}
{"level":"info","msg":"PID 1472 BUNDLE_GEMFILE=/opt/gitlab/embedded/service/gitaly-ruby/Gemfile","supervisor.args":["bundle","exec","bin/ruby-cd","/var/opt/gitlab/gitaly","/opt/gitlab/embedded/service/gitaly-ruby/bin/gitaly-ruby","1448","/var/opt/gitlab/gitaly/internal_sockets/ruby.0"],"supervisor.name":"gitaly-ruby.0","time":"2021-09-18T13:32:47.302Z"}
